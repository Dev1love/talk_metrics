-- Seed data for TalkMetrics demo
-- This file contains sample data for demonstration purposes

-- Sample participants
INSERT INTO participants (id, name, phone, platform, platform_id, is_business) VALUES
('550e8400-e29b-41d4-a716-446655440001', 'TalkMetrics Support', '+1234567890', 'whatsapp', 'business_123', true),
('550e8400-e29b-41d4-a716-446655440002', 'Анна Смирнова', '+7901234567', 'whatsapp', 'user_456', false),
('550e8400-e29b-41d4-a716-446655440003', 'Михаил Петров', '+7905678901', 'whatsapp', 'user_789', false),
('550e8400-e29b-41d4-a716-446655440004', 'Елена Козлова', '+7909876543', 'telegram', 'user_321', false);

-- Sample conversations
INSERT INTO conversations (id, title, platform, platform_conversation_id, status, started_at, closed_at, participant_count, message_count) VALUES
('660e8400-e29b-41d4-a716-446655440001', 'Бронирование номера - Анна С.', 'whatsapp', 'conv_123', 'closed', '2024-09-25 09:00:00+00', '2024-09-25 10:30:00+00', 2, 12),
('660e8400-e29b-41d4-a716-446655440002', 'Вопрос о скидках - Михаил П.', 'whatsapp', 'conv_456', 'closed', '2024-09-25 14:15:00+00', '2024-09-25 15:45:00+00', 2, 8),
('660e8400-e29b-41d4-a716-446655440003', 'Жалоба на сервис - Елена К.', 'telegram', 'conv_789', 'open', '2024-09-26 08:30:00+00', NULL, 2, 6);

-- Sample messages for conversation 1 (Booking)
INSERT INTO messages (id, conversation_id, participant_id, content, direction, timestamp_original, timestamp_normalized) VALUES
('770e8400-e29b-41d4-a716-446655440001', '660e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440002', 'Добрый день! Хочу забронировать номер на 2 ночи', 'incoming', '2024-09-25 09:00:00+00', '2024-09-25 09:00:00+00'),
('770e8400-e29b-41d4-a716-446655440002', '660e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440001', 'Здравствуйте! Конечно, с удовольствием поможем с бронированием. На какие даты планируете?', 'outgoing', '2024-09-25 09:03:00+00', '2024-09-25 09:03:00+00'),
('770e8400-e29b-41d4-a716-446655440003', '660e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440002', 'С 28 по 30 сентября, стандартный номер', 'incoming', '2024-09-25 09:05:00+00', '2024-09-25 09:05:00+00'),
('770e8400-e29b-41d4-a716-446655440004', '660e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440001', 'Отлично! У нас есть свободный стандартный номер. Стоимость 3500 руб/ночь. Также предлагаем завтрак за доплату 500 руб. Интересно?', 'outgoing', '2024-09-25 09:07:00+00', '2024-09-25 09:07:00+00'),
('770e8400-e29b-41d4-a716-446655440005', '660e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440002', 'Да, с завтраком пожалуйста! Как оплатить?', 'incoming', '2024-09-25 09:10:00+00', '2024-09-25 09:10:00+00'),
('770e8400-e29b-41d4-a716-446655440006', '660e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440001', 'Замечательно! Общая стоимость 8000 руб. Можете оплатить по карте, переводом или при заселении. Что удобнее?', 'outgoing', '2024-09-25 09:12:00+00', '2024-09-25 09:12:00+00'),
('770e8400-e29b-41d4-a716-446655440007', '660e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440002', 'Переводом сейчас', 'incoming', '2024-09-25 09:15:00+00', '2024-09-25 09:15:00+00'),
('770e8400-e29b-41d4-a716-446655440008', '660e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440001', 'Отправляю реквизиты: СБП +7901111111. После оплаты пришлите чек', 'outgoing', '2024-09-25 09:16:00+00', '2024-09-25 09:16:00+00'),
('770e8400-e29b-41d4-a716-446655440009', '660e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440002', 'Оплатила! Вот чек', 'incoming', '2024-09-25 10:25:00+00', '2024-09-25 10:25:00+00'),
('770e8400-e29b-41d4-a716-446655440010', '660e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440001', 'Спасибо! Оплата получена. Бронирование подтверждено. Ждем вас 28 сентября после 14:00!', 'outgoing', '2024-09-25 10:30:00+00', '2024-09-25 10:30:00+00');

-- Sample messages for conversation 2 (Discount inquiry)
INSERT INTO messages (id, conversation_id, participant_id, content, direction, timestamp_original, timestamp_normalized) VALUES
('770e8400-e29b-41d4-a716-446655440011', '660e8400-e29b-41d4-a716-446655440002', '550e8400-e29b-41d4-a716-446655440003', 'Есть ли скидки на длительное проживание?', 'incoming', '2024-09-25 14:15:00+00', '2024-09-25 14:15:00+00'),
('770e8400-e29b-41d4-a716-446655440012', '660e8400-e29b-41d4-a716-446655440002', '550e8400-e29b-41d4-a716-446655440001', 'Привет! Да, от 7 дней скидка 10%, от 14 дней - 15%. На сколько дней планируете?', 'outgoing', '2024-09-25 14:45:00+00', '2024-09-25 14:45:00+00'),
('770e8400-e29b-41d4-a716-446655440013', '660e8400-e29b-41d4-a716-446655440002', '550e8400-e29b-41d4-a716-446655440003', 'На 10 дней примерно', 'incoming', '2024-09-25 14:50:00+00', '2024-09-25 14:50:00+00'),
('770e8400-e29b-41d4-a716-446655440014', '660e8400-e29b-41d4-a716-446655440002', '550e8400-e29b-41d4-a716-446655440001', 'Отлично! Для вас скидка 10%. Стандартный номер выйдет 3150 руб/ночь вместо 3500', 'outgoing', '2024-09-25 15:00:00+00', '2024-09-25 15:00:00+00'),
('770e8400-e29b-41d4-a716-446655440015', '660e8400-e29b-41d4-a716-446655440002', '550e8400-e29b-41d4-a716-446655440003', 'Отлично, подумаю', 'incoming', '2024-09-25 15:30:00+00', '2024-09-25 15:30:00+00'),
('770e8400-e29b-41d4-a716-446655440016', '660e8400-e29b-41d4-a716-446655440002', '550e8400-e29b-41d4-a716-446655440001', 'Хорошо! Если будут вопросы - пишите', 'outgoing', '2024-09-25 15:45:00+00', '2024-09-25 15:45:00+00');

-- Sample messages for conversation 3 (Complaint)
INSERT INTO messages (id, conversation_id, participant_id, content, direction, timestamp_original, timestamp_normalized) VALUES
('770e8400-e29b-41d4-a716-446655440017', '660e8400-e29b-41d4-a716-446655440003', '550e8400-e29b-41d4-a716-446655440004', 'Очень недовольна сервисом! В номере была грязная посуда!', 'incoming', '2024-09-26 08:30:00+00', '2024-09-26 08:30:00+00'),
('770e8400-e29b-41d4-a716-446655440018', '660e8400-e29b-41d4-a716-446655440003', '550e8400-e29b-41d4-a716-446655440001', 'Добрый день! Искренне извиняемся за доставленные неудобства. Это недопустимо. Можете прислать фото?', 'outgoing', '2024-09-26 09:15:00+00', '2024-09-26 09:15:00+00'),
('770e8400-e29b-41d4-a716-446655440019', '660e8400-e29b-41d4-a716-446655440003', '550e8400-e29b-41d4-a716-446655440004', 'Вот фото. Это просто неприемлемо!', 'incoming', '2024-09-26 09:20:00+00', '2024-09-26 09:20:00+00'),
('770e8400-e29b-41d4-a716-446655440020', '660e8400-e29b-41d4-a716-446655440003', '550e8400-e29b-41d4-a716-446655440001', 'Понимаю ваше возмущение. Сейчас отправлю горничную для замены всей посуды. Также предоставлю скидку 20% за неудобства', 'outgoing', '2024-09-26 09:25:00+00', '2024-09-26 09:25:00+00');

-- Sample AI analysis data
INSERT INTO ai_analysis (message_id, intention, intention_confidence, politeness_score, sentiment, sentiment_confidence, contains_keywords, ai_model) VALUES
('770e8400-e29b-41d4-a716-446655440001', 'booking', 0.95, 0.8, 'neutral', 0.7, ARRAY['бронировать', 'номер'], 'gpt-4'),
('770e8400-e29b-41d4-a716-446655440002', 'answer', 0.9, 0.9, 'positive', 0.85, ARRAY['поможем', 'с удовольствием'], 'gpt-4'),
('770e8400-e29b-41d4-a716-446655440004', 'upsell', 0.85, 0.85, 'positive', 0.8, ARRAY['завтрак', 'предлагаем'], 'gpt-4'),
('770e8400-e29b-41d4-a716-446655440005', 'payment', 0.9, 0.75, 'positive', 0.8, ARRAY['оплатить'], 'gpt-4'),
('770e8400-e29b-41d4-a716-446655440009', 'payment', 0.95, 0.8, 'positive', 0.9, ARRAY['оплатила', 'чек'], 'gpt-4'),
('770e8400-e29b-41d4-a716-446655440011', 'question', 0.85, 0.75, 'neutral', 0.7, ARRAY['скидки'], 'gpt-4'),
('770e8400-e29b-41d4-a716-446655440017', 'complaint', 0.9, 0.3, 'negative', 0.95, ARRAY['недовольна', 'грязная'], 'gpt-4'),
('770e8400-e29b-41d4-a716-446655440018', 'answer', 0.85, 0.95, 'positive', 0.8, ARRAY['извиняемся', 'недопустимо'], 'gpt-4');

-- Sample conversation metrics
INSERT INTO conversation_metrics (conversation_id, first_response_time_minutes, avg_response_time_minutes, total_response_time_minutes, message_count_incoming, message_count_outgoing, is_completed, has_booking_conversion, has_payment_conversion, has_upsell_attempt, avg_politeness_score) VALUES
('660e8400-e29b-41d4-a716-446655440001', 3, 5.2, 90, 5, 5, true, true, true, true, 0.87),
('660e8400-e29b-41d4-a716-446655440002', 30, 12.5, 90, 3, 3, true, false, false, false, 0.85),
('660e8400-e29b-41d4-a716-446655440003', 45, 22.5, NULL, 2, 2, false, false, false, false, 0.95);

-- Sample global metrics
INSERT INTO global_metrics (metric_date, total_conversations, completed_conversations, avg_first_response_minutes, avg_response_time_minutes, completion_rate, booking_conversion_rate, payment_conversion_rate, upsell_rate, avg_politeness_score, cci_score) VALUES
('2024-09-25', 2, 2, 16.5, 8.85, 100.0, 50.0, 50.0, 50.0, 0.86, 85),
('2024-09-26', 1, 0, 45.0, 22.5, 0.0, 0.0, 0.0, 0.0, 0.95, 65);

-- Sample insights
INSERT INTO insights (title, description, recommendation, priority, category, proof_message_id, proof_conversation_id, metric_impact) VALUES
('Медленный первый ответ', 'Время первого ответа в разговоре с Еленой К. составило 45 минут, что значительно превышает норму', 'Настроить уведомления для более быстрого реагирования на новые сообщения', 'high', 'response_time', '770e8400-e29b-41d4-a716-446655440018', '660e8400-e29b-41d4-a716-446655440003', 15.0),
('Отличная работа с жалобой', 'Несмотря на негативную ситуацию, ответ был очень вежливым и конструктивным', 'Использовать этот подход как образец для обработки жалоб', 'medium', 'politeness', '770e8400-e29b-41d4-a716-446655440018', '660e8400-e29b-41d4-a716-446655440003', 5.0),
('Успешный апсейл', 'Удачно предложен завтрак к основному бронированию', 'Продолжать предлагать дополнительные услуги в подходящих моментах', 'low', 'conversion', '770e8400-e29b-41d4-a716-446655440004', '660e8400-e29b-41d4-a716-446655440001', 8.0);

-- Sample file upload record
INSERT INTO file_uploads (filename, file_size, file_type, platform, upload_status, conversations_created, messages_created, participants_created) VALUES
('demo_whatsapp_chat.txt', 2048, 'txt', 'whatsapp', 'completed', 2, 16, 3),
('demo_telegram_chat.json', 1536, 'json', 'telegram', 'completed', 1, 4, 2);